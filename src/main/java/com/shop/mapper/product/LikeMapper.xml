<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.shop.mapper.product.LikeMapper">
	<!-- 유저아이디로 장바구니테이블에서 상품목록을 가져온다.(BK/12.22) -->
	<select id="getUserLikedList" resultType="com.shop.vo.Like_Tbl">
		select * from Like_Tbl
		where u_id = #{u_id}
	</select>
	<select id="getUserLikeProduct"
		resultType="com.shop.vo.Like_Tbl">
		select p_no,u_id from Like_Tbl group by p_no,u_id having
		u_id = #{u_id} and p_no = #{p_no}
	</select>

	<insert id="addLike">
		insert into Like_Tbl(u_id,p_no)
		values(#{u_id},#{p_no})
	</insert>
	<!-- 2020/01/08 yunhj 칼럼 추가에 따른 addlike 추가 -->

	<delete id="deleteLike">
		delete from like_tbl where u_id = #{u_id} and p_no =
		#{p_no}
	</delete>
	<!-- 보군님 -->


	<!-- like 삭제 yunhj -->
	<delete id="delete">
		delete from like_tbl where u_id = #{u_id} and p_no = #{p_no}
		<!-- parm으로 넘겨주면 ㄱㅊ -->
	</delete>



	<delete id="deleteAll">
		delete from like_tbl where u_id = #{u_id}
	</delete>



	<!-- like의 출력하는 쿼리문 yunhj 2021/01/13 -->
	<select id="getCartUpdate" resultType="package com.shop.vo" >

		SELECT
		p.p_name,
		p.amount,
		l.u_id,
		l.p_no

		FROM like_tbl l
		LEFT JOIN prod_tbl p ON l.p_no = p.p_no
		
		 where u_id = #{u_id}
		 
		<!-- mysql은 full outer join이 없어서 union 쿼리와 left, rigrt조인은 연결 한 후, where조건을 
			추가 했다. -->
	</select>
	
	
	
	




</mapper>



